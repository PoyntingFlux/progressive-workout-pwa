<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <title>Progressive Workout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#111827" />

  <!-- Basic styling (cache-busted for v12) -->
  <link rel="stylesheet" href="styles.css?v=12" />
</head>
<body>
  <header class="app-header">
    <h1>Progressive Workout</h1>
    <p class="subtitle">Simple progressive overload, on repeat.</p>
  </header>

  <main>
    <section id="today-section" class="card">
      <h2>Today</h2>
      <p id="today-date" class="muted"></p>
      <p id="day-info"></p>
      <p id="cycle-info" class="muted"></p>
      <p id="streak-info" class="muted"></p>

      <div id="rest-message" class="rest-banner hidden">
        üèñ Rest day ‚Äî no workout today.
      </div>

      <div id="workout-container" class="hidden fade-container">
        <h3>Exercises</h3>
        <table class="exercise-table">
          <thead>
            <tr>
              <th>Exercise</th>
              <th>Sets left</th>
              <th>Reps</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="exercise-body">
          </tbody>
        </table>

        <button id="complete-btn" class="primary-btn">
          Mark today as completed ‚úÖ
        </button>
        <p id="completed-message" class="muted hidden">
          Workout already marked completed for today.
        </p>
      </div>
    </section>

    <section id="auto-tune-section" class="card hidden">
      <div class="auto-tune-header-row">
        <h2>Auto-Tune Review (optional)</h2>
        <p id="auto-tune-cycle-label" class="muted"></p>
      </div>
      <p class="muted">
        At the end of a cycle, quickly review how each exercise felt. Suggestions
        are shown only here ‚Äî nothing changes until you tap ‚ÄúApply Auto-Tune‚Äù.
      </p>
      <table class="exercise-table auto-tune-table">
        <thead>
          <tr>
            <th>Exercise</th>
            <th>Last min‚Äìmax</th>
            <th>Review</th>
            <th>Suggested</th>
          </tr>
        </thead>
        <tbody id="auto-tune-body"></tbody>
      </table>
      <div class="auto-tune-actions">
        <button id="apply-auto-tune-btn" class="primary-btn">
          Apply Auto-Tune
        </button>
        <button id="dismiss-auto-tune-btn" class="secondary-btn">
          Skip for now
        </button>
      </div>
      <p id="auto-tune-status" class="muted"></p>
    </section>

    <section id="settings-section" class="card">
      <div class="settings-header-row">
        <h2>Settings</h2>
        <button
          id="toggle-settings-btn"
          class="icon-btn"
          aria-expanded="true"
          aria-controls="settings-body"
        >
          Hide
        </button>
      </div>

      <div id="settings-body" class="settings-body fade-container">
        <div class="settings-group">
          <label>
            Rest every
            <input id="rest-days-input" type="number" min="0" value="4" />
            days (0 = no rest days)
          </label>
        </div>

        <div class="settings-group">
          <label>
            Start date
            <input id="start-date-input" type="date" />
          </label>
          <button id="reset-start-btn" class="secondary-btn">
            Set start date to today
          </button>
        </div>

        <div class="settings-group">
          <label>
            Theme
            <select id="theme-select">
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </label>
        </div>

        <h3>Exercises</h3>
        <table class="exercise-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Sets</th>
              <th>Start Reps</th>
              <th>+Reps/Day</th>
              <th>Max Reps</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="settings-exercise-body">
          </tbody>
        </table>

        <button id="add-exercise-btn" class="secondary-btn icon-btn">
          <span>Ôºã</span><span>Add Exercise</span>
        </button>

        <div class="settings-actions">
          <button id="save-settings-btn" class="primary-btn">
            Save Settings
          </button>
          <button id="reset-cycle-btn" class="danger-btn">
            <span class="reset-main">Reset Cycle</span>
            <span class="reset-sub">(back to day 1)</span>
          </button>
        </div>
        <p id="settings-status" class="muted"></p>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p class="muted">
      Install this app: open in Safari ‚Üí Share ‚Üí "Add to Home Screen".
    </p>
    <p class="muted">
      Version 12 ¬∑
      <button id="clear-cache-btn" class="secondary-btn small-btn">
        Clear cache
      </button>
      <button id="update-app-btn" class="secondary-btn small-btn hidden">
        Update app
      </button>
    </p>
  </footer>

  <!-- App logic (cache-busted for v12) -->
  <script src="app.js?v=11"></script>
</body>
</html>
